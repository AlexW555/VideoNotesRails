<%= form_with model: note, url: notes_path, data: { turbo: true, controller: "form-debug" } do |f| %>
  <% if note.errors.any? %>
    <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded">
      <p><strong><%= pluralize(note.errors.count, "error") %> prevented saving:</strong></p>
      <ul class="list-disc list-inside">
        <% note.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.hidden_field :timestamp_seconds, value: note.timestamp_seconds || 0,
        data: { "video-notes-target": "timestampInput" } %>

  <div class="mb-4">
    <%= f.text_area :body, rows: 3, placeholder: "Write a noteâ€¦", 
        class: "w-full p-2 border border-gray-300 rounded" %>
  </div>

  <div class="flex gap-2 mb-4">
    <button
      type="button"
      data-action="click->video-notes#stampNow"
      class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600">
      Stamp Now
    </button>
    
    <span class="px-3 py-1 bg-gray-100 rounded">
      Time: <span data-video-notes-target="timestampDisplay"><%= note.timestamp_seconds || 0 %></span>s
    </span>
  </div>

  <div>
    <%= f.submit "Save note", class: "px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600" %>
  </div>
<% end %>
